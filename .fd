#!/bin/sh -eu

fd_command=$(command-available-first fd fdfind)
if [ -z "$fd_command" ]; then
	echo "command not found: fd"
	exit 127
fi

flags=
if [ "${COLORTERM:-}" != truecolor ]; then
	flags="$flags --color never"
elif [ -z "${LS_COLORS:-}" ]; then
	eval "$(dircolors)"
fi
# shellcheck disable=SC2086
exec "$fd_command" $flags "$@"
